<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HanaGo Travel 花語旅遊 - 日本櫻花之旅專家</title>
    
    <!-- SEO 優化 -->
    <meta name="description" content="HanaGo Travel 花語旅遊 - 專業日本櫻花之旅，7天行程包含東京京都奈良，早鳥優惠價NT$28,000。24小時客服，專業導遊帶領。">
    <meta name="keywords" content="日本旅遊,櫻花季,東京,京都,奈良,旅行社,日本自由行,賞櫻">
    <meta name="author" content="HanaGo Travel">
    
    <!-- Open Graph -->
    <meta property="og:title" content="HanaGo Travel 花語旅遊 - 日本櫻花之旅">
    <meta property="og:description" content="與我們一起開啟夢幻的日本之旅，感受櫻花盛開的浪漫">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh_TW">
    
    <!-- 預載入關鍵資源 -->
    <link rel="preload" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjUiIGN5PSIyNSIgcj0iMjQiIGZpbGw9IiNmZjZiOWQiLz4KPHRleHQgeD0iNTAlIiB5PSI1NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiPvCfjIg8L3RleHQ+Cjwvc3ZnPgo=" as="image">
    
    <!-- 結構化資料 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TravelAgency",
        "name": "HanaGo Travel 花語旅遊",
        "telephone": "+886-952-520-520",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "TW",
            "addressLocality": "台北市"
        },
        "url": "#",
        "priceRange": "NT$28,000-38,000",
        "description": "專業日本櫻花之旅旅行社"
    }
    </script>

    <style>
        :root {
            --primary-color: #e91e63;
            --secondary-color: #ff6b9d;
            --accent-color: #ff9800;
            --text-color: #333;
            --bg-color: #ffeef8;
            --white: #ffffff;
            --gray-light: #f8f9fa;
            --gray: #e9ecef;
            --transition: all 0.3s ease;
            --border-radius: 10px;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
            --scroll-progress: 0%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* 頁面滾動進度條 */
        html::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: var(--scroll-progress);
            height: 3px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            z-index: 1001;
            transition: width 0.1s ease;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, var(--bg-color) 0%, #ffe5f0 100%);
            overflow-x: hidden;
        }

        /* 載入動畫 */
        .loading-spinner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .loading-spinner.show {
            opacity: 1;
            visibility: visible;
        }

        .spinner {
            font-size: 3rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* 錯誤提示 */
        .error-message {
            background: #ff4757;
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            display: none;
            animation: slideDown 0.3s ease;
        }

        .success-message {
            background: #2ed573;
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            display: none;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Header - 無障礙改善 */
        header {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            color: white;
            padding: 0.8rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 20px rgba(233, 30, 99, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            flex-shrink: 0;
        }
        
        .logo-img {
            height: 50px;
            width: 50px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
            background: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .logo-text {
            font-size: clamp(1.2rem, 4vw, 2rem);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            white-space: nowrap;
        }

        .slogan {
            font-size: clamp(0.7rem, 2vw, 0.9rem);
            opacity: 0.9;
            margin-top: 0.2rem;
        }

        /* 改善的漢堡選單 */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .menu-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .menu-toggle:focus {
            outline: 2px solid white;
            outline-offset: 2px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: clamp(0.9rem, 2vw, 1rem);
            position: relative;
        }

        nav a:hover, nav a:focus {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            outline: none;
        }

        /* Hero Section - 改善動畫 */
        .hero {
            background: linear-gradient(rgba(255, 107, 157, 0.8), rgba(233, 30, 99, 0.8)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><pattern id="sakura" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="3" fill="%23ffb3d1" opacity="0.6"/></pattern></defs><rect width="1200" height="600" fill="url(%23sakura)"/></svg>');
            min-height: 70vh;
            height: clamp(400px, 80vh, 800px);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            padding: 2rem 1rem;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="%23ff9ac7" opacity="0.4"><animate attributeName="cy" values="20;80;20" dur="3s" repeatCount="indefinite"/></circle><circle cx="50" cy="40" r="1.5" fill="%23ffc4dd" opacity="0.6"><animate attributeName="cy" values="40;90;40" dur="4s" repeatCount="indefinite"/></circle><circle cx="80" cy="30" r="2.5" fill="%23ff6b9d" opacity="0.3"><animate attributeName="cy" values="30;85;30" dur="5s" repeatCount="indefinite"/></circle></svg>') repeat;
            animation: float 10s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .hero-content {
            z-index: 2;
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 8vw, 4rem);
            margin-bottom: 1rem;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            animation: fadeInUp 1s ease-out;
        }

        .hero p {
            font-size: clamp(1.1rem, 4vw, 1.5rem);
            margin-bottom: 2rem;
            animation: fadeInUp 1s ease-out 0.3s both;
            line-height: 1.4;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(45deg, var(--accent-color), #ff5722);
            color: white;
            padding: clamp(0.8rem, 3vw, 1rem) clamp(1.5rem, 5vw, 2rem);
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: clamp(1rem, 3vw, 1.1rem);
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(255, 152, 0, 0.4);
            animation: fadeInUp 1s ease-out 0.6s both;
            position: relative;
            overflow: hidden;
        }

        .cta-button:hover, .cta-button:focus {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 152, 0, 0.6);
            outline: none;
        }

        .cta-button:focus {
            box-shadow: 0 12px 35px rgba(255, 152, 0, 0.6), 0 0 0 3px rgba(255, 255, 255, 0.5);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Sections - 語義化改善 */
        section {
            padding: clamp(2rem, 6vw, 4rem) 0;
        }

        .section-title {
            text-align: center;
            font-size: clamp(2rem, 6vw, 2.5rem);
            margin-bottom: clamp(2rem, 5vw, 3rem);
            color: var(--primary-color);
            position: relative;
        }

        .section-title::after {
            content: '🌸';
            display: block;
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            margin-top: 0.5rem;
        }

        /* Tour Package - 改善卡片設計 */
        .tour-package {
            background: var(--white);
            border-radius: 20px;
            padding: clamp(1.5rem, 4vw, 2rem);
            margin: clamp(1.5rem, 4vw, 2rem) 0;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .tour-package::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        }

        .tour-package:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .package-header {
            text-align: center;
            margin-bottom: clamp(1.5rem, 4vw, 2rem);
            background: transparent;
            border-radius: 0;
            padding: 0;
        }

        .package-title {
            font-size: clamp(1.5rem, 5vw, 2rem);
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .package-price {
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            color: var(--accent-color);
            font-weight: bold;
            line-height: 1.4;
        }

        .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: clamp(1rem, 3vw, 1.2rem);
            margin-right: 1rem;
            display: inline-block;
        }

        .discount-badge {
            background: #2ed573;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* 行程卡片 - 改善可讀性 */
        .itinerary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: clamp(1rem, 3vw, 1.5rem);
            margin: clamp(1.5rem, 4vw, 2rem) 0;
        }

        .day-card {
            background: linear-gradient(135deg, var(--gray-light) 0%, var(--gray) 100%);
            padding: clamp(1rem, 3vw, 1.5rem);
            border-radius: 15px;
            border-left: 4px solid var(--primary-color);
            transition: var(--transition);
            position: relative;
        }

        .day-card:hover {
            background: linear-gradient(135deg, var(--white) 0%, var(--gray-light) 100%);
            transform: scale(1.02);
            box-shadow: var(--shadow);
        }

        .day-number {
            font-weight: bold;
            color: var(--primary-color);
            font-size: clamp(1.1rem, 3vw, 1.2rem);
        }

        .day-theme {
            font-weight: bold;
            margin: 0.5rem 0;
            color: var(--text-color);
            font-size: clamp(1rem, 3vw, 1.1rem);
        }

        .day-description {
            color: #666;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            line-height: 1.4;
        }

        /* Interactive Features - 改善交互體驗 */
        .interactive-section {
            background: linear-gradient(135deg, var(--white) 0%, #f3e5f5 100%);
            padding: clamp(2rem, 5vw, 3rem) 0;
            border-radius: 30px;
            margin: clamp(1.5rem, 4vw, 2rem) 0;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: clamp(1.5rem, 4vw, 2rem);
            margin-top: clamp(1.5rem, 4vw, 2rem);
        }

        .activity-card {
            background: var(--white);
            padding: clamp(1.5rem, 4vw, 2rem);
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.1);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: var(--transition);
        }

        .activity-card:hover::before {
            left: 100%;
        }

        .activity-card:hover, .activity-card:focus {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 35px rgba(233, 30, 99, 0.2);
            outline: none;
        }

        .activity-card:focus {
            box-shadow: 0 15px 35px rgba(233, 30, 99, 0.2), 0 0 0 3px var(--secondary-color);
        }

        .activity-icon {
            font-size: clamp(2.5rem, 6vw, 3rem);
            margin-bottom: 1rem;
        }

        .activity-card h3 {
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            margin-bottom: 0.8rem;
            color: var(--primary-color);
        }

        .activity-card p {
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            line-height: 1.5;
            color: #666;
        }

        /* Booking Form - 改善表單驗證 */
        .booking-form {
            background: var(--white);
            border-radius: 20px;
            box-shadow: var(--shadow);
            margin: clamp(1.5rem, 4vw, 2rem) 0;
            overflow: hidden;
        }

        .booking-form form {
            padding: clamp(1.5rem, 4vw, 2rem);
        }

        .form-group {
            margin-bottom: clamp(1rem, 3vw, 1.5rem);
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--primary-color);
            font-size: clamp(0.95rem, 2.5vw, 1rem);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: clamp(0.8rem, 2.5vw, 1rem);
            border: 2px solid var(--gray);
            border-radius: var(--border-radius);
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            transition: var(--transition);
            background: var(--white);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(233, 30, 99, 0.2);
        }

        .form-group input.error {
            border-color: #ff4757;
            background: #ffe0e0;
        }

        .form-group input.success {
            border-color: #2ed573;
            background: #e0ffe0;
        }

        .field-error {
            color: #ff4757;
            font-size: 0.8rem;
            margin-top: 0.25rem;
            display: none;
        }

        .submit-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: clamp(0.8rem, 3vw, 1rem) clamp(1.5rem, 4vw, 2rem);
            border: none;
            border-radius: 50px;
            font-size: clamp(1rem, 3vw, 1.1rem);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .submit-btn:hover, .submit-btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4);
            outline: none;
        }

        .submit-btn:focus {
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.4), 0 0 0 3px rgba(255, 255, 255, 0.5);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Contact Info - 改善聯絡資訊 */
        .contact-info {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: clamp(2rem, 5vw, 3rem) 0;
            border-radius: 20px;
            margin: clamp(1.5rem, 4vw, 2rem) 0;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: clamp(1.5rem, 4vw, 2rem);
        }

        .contact-item {
            text-align: center;
            padding: clamp(0.8rem, 2vw, 1rem);
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            transition: var(--transition);
        }

        .contact-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .contact-item h3 {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: 1rem;
        }

        .contact-item p {
            font-size: clamp(0.95rem, 2.5vw, 1rem);
            line-height: 1.4;
        }

        .contact-item a {
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }

        .contact-item a:hover {
            text-decoration: underline;
        }

        /* Footer - 改善頁腳 */
        footer {
            background: #333;
            color: white;
            text-align: center;
            padding: clamp(1.5rem, 4vw, 2rem) 0;
        }

        footer p {
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        /* 櫻花特效 - 優化效能 */
        .sakura-particle {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            color: #ff9ac7;
            font-size: clamp(1rem, 3vw, 1.5rem);
            animation: fall 5s linear infinite;
            will-change: transform;
        }

        @keyframes fall {
            from {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* 手機版優化 */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
                z-index: 101;
            }

            nav {
                display: none;
                width: 100%;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
                box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                z-index: 99;
                border-radius: 0 0 15px 15px;
            }

            nav.active {
                display: block !important;
                animation: slideDown 0.3s ease;
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            nav ul {
                flex-direction: column;
                gap: 0;
                padding: 1rem 0;
            }

            nav li {
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }

            nav li:last-child {
                border-bottom: none;
            }

            nav a {
                display: block;
                padding: 1rem 2rem;
                border-radius: 0;
            }

            .header-content {
                flex-wrap: nowrap;
                position: relative;
            }

            .logo {
                gap: 0.5rem;
            }

            .logo-img {
                height: 40px;
                width: 40px;
            }

            .hero {
                min-height: 60vh;
                padding: 1rem;
            }

            .original-price {
                display: block;
                margin-bottom: 0.5rem;
                margin-right: 0;
            }
        }

        /* 平板版優化 */
        @media (min-width: 769px) and (max-width: 1024px) {
            .itinerary {
                grid-template-columns: repeat(2, 1fr);
            }

            .activity-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .contact-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* 大螢幕優化 */
        @media (min-width: 1200px) {
            .container {
                max-width: 1400px;
            }

            .itinerary {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* 觸控優化 */
        @media (hover: none) and (pointer: coarse) {
            .activity-card:hover,
            .day-card:hover,
            .tour-package:hover {
                transform: none;
            }

            .activity-card:active {
                transform: scale(0.98);
            }

            .cta-button:hover,
            .submit-btn:hover {
                transform: none;
            }

            .cta-button:active,
            .submit-btn:active {
                transform: scale(0.98);
            }
        }

        /* 高對比度支援 */
        @media (prefers-contrast: high) {
            .hero {
                background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8));
            }

            .day-card,
            .activity-card,
            .tour-package {
                border: 2px solid #333;
            }
        }

        /* 減少動畫偏好支援 */
        @media (prefers-reduced-motion: reduce) {
            .hero::before,
            .sakura-particle,
            .fadeInUp,
            .pulse,
            .spin,
            .float {
                animation: none;
            }

            .activity-card:hover,
            .day-card:hover,
            .tour-package:hover,
            .cta-button:hover,
            .submit-btn:hover {
                transform: none;
            }
        }

        /* 列印樣式 */
        @media print {
            .hero,
            .sakura-particle,
            nav,
            .menu-toggle,
            .loading-spinner {
                display: none;
            }

            body {
                background: white;
                color: black;
            }

            .tour-package,
            .booking-form,
            .contact-info {
                background: white;
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <!-- 載入動畫 -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner">🌸</div>
    </div>

    <header role="banner">
        <div class="container">
            <div class="header-content">
                <div>
                    <div class="logo">
                        <div class="logo-img" role="img" aria-label="HanaGo Travel Logo">🌸</div>
                        <div>
                            <div class="logo-text">HanaGo Travel 花語旅遊</div>
                            <div class="slogan">Bloom Your Journey 開啟您的旅程之花</div>
                        </div>
                    </div>
                </div>
                <button class="menu-toggle" onclick="toggleMenu()" 
                        aria-label="切換選單" aria-expanded="false" aria-controls="nav">☰</button>
                <nav id="nav" role="navigation" aria-label="主要導航">
                    <ul>
                        <li><a href="#home">首頁</a></li>
                        <li><a href="#tour">行程</a></li>
                        <li><a href="#activities">體驗活動</a></li>
                        <li><a href="#booking">預約</a></li>
                        <li><a href="#contact">聯絡我們</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <section id="home" class="hero" role="banner">
            <div class="hero-content">
                <h1>日本櫻花之旅</h1>
                <p>與我們一起開啟夢幻的日本之旅<br>感受櫻花盛開的浪漫</p>
                <a href="#booking" class="cta-button" role="button">立即預約 ✈️</a>
            </div>
        </section>

        <section id="tour" class="container" aria-labelledby="tour-heading">
            <h2 id="tour-heading" class="section-title">精選行程</h2>
            
            <article class="tour-package">
                <header class="package-header">
                    <h3 class="package-title">🌸 7天日本櫻花之旅 🌸</h3>
                    <div class="package-price">
                        <span class="original-price">NT$38,000</span>
                        <span>早鳥優惠 NT$28,000</span>
                        <span class="discount-badge">省 $10,000</span>
                    </div>
                </header>

                <div class="itinerary" role="list" aria-label="七天行程安排">
                    <div class="day-card" role="listitem">
                        <div class="day-number">第1天</div>
                        <div class="day-theme">抵達東京</div>
                        <div class="day-description">機場接送，入住酒店，歡迎晚餐</div>
                    </div>
                    <div class="day-card" role="listitem">
                        <div class="day-number">第2天</div>
                        <div class="day-theme">東京探索</div>
                        <div class="day-description">淺草寺、東京晴空塔、明治神宮</div>
                    </div>
                    <div class="day-card" role="listitem">
                        <div class="day-number">第3天</div>
                        <div class="day-theme">日光一日遊</div>
                        <div class="day-description">參觀東照宮、瀨戶橋</div>
                    </div>
                    <div class="day-card" role="listitem">
                        <div class="day-number">第4天</div>
                        <div class="day-theme">前往京都</div>
                        <div class="day-description">新幹線至京都，參觀伏見稻荷大社</div>
                    </div>
                    <div class="day-card" role="listitem">
                        <div class="day-number">第5天</div>
                        <div class="day-theme">京都寺廟與花園</div>
                        <div class="day-description">金閣寺、嵐山竹林、天龍寺</div>
                    </div>
                    <div class="day-card" role="listitem">
                        <div class="day-number">第6天</div>
                        <div class="day-theme">京都與奈良</div>
                        <div class="day-description">清水寺，奈良東大寺與鹿公園</div>
                    </div>
                    <div class="day-card" role="listitem">
                        <div class="day-number">第7天</div>
                        <div class="day-theme">離開</div>
                        <div class="day-description">最後購物，轉機場</div>
                    </div>
                </div>
            </article>
        </section>

        <section id="activities" class="interactive-section" aria-labelledby="activities-heading">
            <div class="container">
                <h2 id="activities-heading" class="section-title">特色體驗活動</h2>
                <div class="activity-grid" role="list" aria-label="體驗活動選項">
                    <div class="activity-card" onclick="showActivity('matcha')" 
                         onkeydown="handleCardKeyDown(event, 'matcha')" 
                         tabindex="0" role="button" aria-describedby="matcha-desc">
                        <div class="activity-icon" aria-hidden="true">🍵</div>
                        <h3>抹茶DIY</h3>
                        <p id="matcha-desc">現場報名，每場15人<br>自製抹茶帶回家</p>
                    </div>
                    <div class="activity-card" onclick="showActivity('yukata')" 
                         onkeydown="handleCardKeyDown(event, 'yukata')" 
                         tabindex="0" role="button" aria-describedby="yukata-desc">
                        <div class="activity-icon" aria-hidden="true">👘</div>
                        <h3>浴衣試穿</h3>
                        <p id="yukata-desc">追蹤IG+拍照上傳<br>即拍即印Polaroid</p>
                    </div>
                    <div class="activity-card" onclick="showActivity('gacha')" 
                         onkeydown="handleCardKeyDown(event, 'gacha')" 
                         tabindex="0" role="button" aria-describedby="gacha-desc">
                        <div class="activity-icon" aria-hidden="true">🎰</div>
                        <h3>扭蛋抽獎</h3>
                        <p id="gacha-desc">完成闖關集章<br>有機會抽中免費機票</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="booking" class="container" aria-labelledby="booking-heading">
            <h2 id="booking-heading" class="section-title">立即預約</h2>
            
            <div id="messages" aria-live="polite">
                <div class="error-message" id="errorMessage" role="alert"></div>
                <div class="success-message" id="successMessage" role="status"></div>
            </div>
            
            <div class="booking-form">
                <form id="bookingForm" novalidate>
                    <div class="form-group">
                        <label for="name">姓名 <span aria-label="必填">*</span></label>
                        <input type="text" id="name" name="name" required 
                               aria-describedby="name-error" autocomplete="name">
                        <div class="field-error" id="name-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">電話 <span aria-label="必填">*</span></label>
                        <input type="tel" id="phone" name="phone" required 
                               aria-describedby="phone-error" autocomplete="tel">
                        <div class="field-error" id="phone-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email <span aria-label="必填">*</span></label>
                        <input type="email" id="email" name="email" required 
                               aria-describedby="email-error" autocomplete="email">
                        <div class="field-error" id="email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="people">人數</label>
                        <select id="people" name="people" aria-describedby="people-help">
                            <option value="1">1人</option>
                            <option value="2" selected>2人</option>
                            <option value="3">3人</option>
                            <option value="4">4人</option>
                            <option value="5+">5人以上</option>
                        </select>
                        <div id="people-help" class="form-help">選擇參與人數</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">希望出發日期</label>
                        <input type="date" id="date" name="date" aria-describedby="date-help">
                        <div id="date-help" class="form-help">建議提前30天預約</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">特殊需求</label>
                        <textarea id="message" name="message" rows="4" 
                                  placeholder="請告訴我們您的特殊需求或問題..."
                                  aria-describedby="message-help"></textarea>
                        <div id="message-help" class="form-help">如：素食、行動不便、生日慶祝等</div>
                    </div>
                    
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span class="btn-text">送出預約申請 🌸</span>
                    </button>
                </form>
            </div>
        </section>

        <section id="contact" class="contact-info" aria-labelledby="contact-heading">
            <div class="container">
                <h2 id="contact-heading" class="section-title" style="color: white;">聯絡資訊</h2>
                <div class="contact-grid" role="list" aria-label="聯絡方式">
                    <div class="contact-item" role="listitem">
                        <h3>📞 緊急熱線</h3>
                        <p>
                            <a href="tel:+886952520520" aria-label="撥打緊急熱線">+886 952-520-520</a><br>
                            24小時待命服務
                        </p>
                    </div>
                    <div class="contact-item" role="listitem">
                        <h3>🇯🇵 日本服務中心</h3>
                        <p>
                            <a href="tel:+81313145920" aria-label="撥打日本服務中心">(03) 1314-5920</a>
                        </p>
                    </div>
                    <div class="contact-item" role="listitem">
                        <h3>🏢 台北總公司</h3>
                        <p>
                            <a href="tel:+886233445920" aria-label="撥打台北總公司">(02) 3344-5920</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer role="contentinfo">
        <div class="container">
            <p>&copy; 2025 HanaGo Travel 花語旅遊. All rights reserved.</p>
            <p>Founded in Taipei, 2023 | 18 staff members dedicated to your journey</p>
        </div>
    </footer>

    <script>
        // 全域變數和配置
        const CONFIG = {
            sakuraInterval: {
                mobile: 4000,
                tablet: 3000,
                desktop: 2000
            },
            animations: {
                reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches
            }
        };

        // 工具函數
        const Utils = {
            // 防抖函數
            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            },

            // 節流函數
            throttle(func, limit) {
                let inThrottle;
                return function() {
                    const args = arguments;
                    const context = this;
                    if (!inThrottle) {
                        func.apply(context, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                }
            },

            // 輸入清理
            sanitizeInput(input) {
                return input.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
                           .replace(/[<>]/g, '')
                           .trim();
            },

            // 顯示訊息
            showMessage(message, type = 'success') {
                const messageEl = document.getElementById(type === 'success' ? 'successMessage' : 'errorMessage');
                const otherMessageEl = document.getElementById(type === 'success' ? 'errorMessage' : 'successMessage');
                
                // 隱藏其他訊息
                otherMessageEl.style.display = 'none';
                
                messageEl.textContent = message;
                messageEl.style.display = 'block';
                
                // 3秒後自動隱藏
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }
        };

        // 導航功能
        const Navigation = {
            init() {
                this.setupMenuToggle();
                this.setupSmoothScroll();
                this.setupKeyboardNavigation();
                this.setupClickOutside();
            },

            setupMenuToggle() {
                const menuToggle = document.querySelector('.menu-toggle');
                const nav = document.getElementById('nav');
                
                if (menuToggle && nav) {
                    // 使用事件委派確保事件正確綁定
                    menuToggle.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        this.toggleMenu();
                    });
                    
                    // 點擊選單項目後自動關閉選單（手機版）
                    document.querySelectorAll('nav a').forEach(link => {
                        link.addEventListener('click', (e) => {
                            if (window.innerWidth <= 768) {
                                setTimeout(() => this.closeMenu(), 100);
                            }
                        });
                    });
                }
            },

            setupClickOutside() {
                // 點擊選單外部時關閉選單
                document.addEventListener('click', (e) => {
                    const nav = document.getElementById('nav');
                    const menuToggle = document.querySelector('.menu-toggle');
                    
                    if (nav && nav.classList.contains('active')) {
                        if (!nav.contains(e.target) && !menuToggle.contains(e.target)) {
                            this.closeMenu();
                        }
                    }
                });
            },

            toggleMenu() {
                const nav = document.getElementById('nav');
                const menuToggle = document.querySelector('.menu-toggle');
                
                if (!nav || !menuToggle) {
                    console.error('選單元素未找到');
                    return;
                }
                
                const isActive = nav.classList.contains('active');
                
                if (isActive) {
                    this.closeMenu();
                } else {
                    this.openMenu();
                }
            },

            openMenu() {
                const nav = document.getElementById('nav');
                const menuToggle = document.querySelector('.menu-toggle');
                
                nav.classList.add('active');
                menuToggle.setAttribute('aria-expanded', 'true');
                menuToggle.innerHTML = '✕'; // 改變圖示為關閉
                
                // 防止背景滾動
                document.body.style.overflow = 'hidden';
            },

            closeMenu() {
                const nav = document.getElementById('nav');
                const menuToggle = document.querySelector('.menu-toggle');
                
                nav.classList.remove('active');
                menuToggle.setAttribute('aria-expanded', 'false');
                menuToggle.innerHTML = '☰'; // 改回漢堡選單圖示
                
                // 恢復背景滾動
                document.body.style.overflow = '';
            },

            setupSmoothScroll() {
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            },

            setupKeyboardNavigation() {
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeMenu();
                    }
                });
            }
        };

        // 表單驗證與處理
        const FormHandler = {
            init() {
                this.setupFormValidation();
                this.setupDateDefault();
            },

            setupFormValidation() {
                const form = document.getElementById('bookingForm');
                const inputs = form.querySelectorAll('input[required]');
                
                // 即時驗證
                inputs.forEach(input => {
                    input.addEventListener('blur', () => this.validateField(input));
                    input.addEventListener('input', () => this.clearFieldError(input));
                });

                // 表單提交
                form.addEventListener('submit', (e) => this.handleSubmit(e));
            },

            validateField(input) {
                const value = Utils.sanitizeInput(input.value);
                const fieldName = input.name;
                let isValid = true;
                let errorMessage = '';

                // 清除之前的狀態
                this.clearFieldError(input, false);

                if (!value && input.required) {
                    isValid = false;
                    errorMessage = '此欄位為必填';
                } else if (value) {
                    switch (input.type) {
                        case 'email':
                            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                            if (!emailRegex.test(value)) {
                                isValid = false;
                                errorMessage = '請輸入正確的Email格式';
                            }
                            break;
                        case 'tel':
                            const phoneRegex = /^[\+]?[\d\s\-\(\)]{8,15}$/;
                            if (!phoneRegex.test(value)) {
                                isValid = false;
                                errorMessage = '請輸入正確的電話號碼';
                            }
                            break;
                        case 'text':
                            if (fieldName === 'name' && value.length < 2) {
                                isValid = false;
                                errorMessage = '姓名至少需要2個字元';
                            }
                            break;
                    }
                }

                this.setFieldState(input, isValid, errorMessage);
                return isValid;
            },

            setFieldState(input, isValid, errorMessage) {
                const errorEl = document.getElementById(`${input.name}-error`);
                
                input.classList.remove('error', 'success');
                
                if (!isValid) {
                    input.classList.add('error');
                    if (errorEl) {
                        errorEl.textContent = errorMessage;
                        errorEl.style.display = 'block';
                    }
                } else if (input.value.trim()) {
                    input.classList.add('success');
                }
            },

            clearFieldError(input, clearValue = true) {
                const errorEl = document.getElementById(`${input.name}-error`);
                
                input.classList.remove('error');
                if (errorEl) {
                    errorEl.style.display = 'none';
                }
                
                if (clearValue && input.value.trim()) {
                    input.classList.add('success');
                }
            },

            async handleSubmit(e) {
                e.preventDefault();
                
                const form = e.target;
                const submitBtn = document.getElementById('submitBtn');
                const btnText = submitBtn.querySelector('.btn-text');
                const originalText = btnText.textContent;
                
                // 驗證所有必填欄位
                const requiredInputs = form.querySelectorAll('input[required]');
                let isFormValid = true;
                
                requiredInputs.forEach(input => {
                    if (!this.validateField(input)) {
                        isFormValid = false;
                    }
                });

                if (!isFormValid) {
                    Utils.showMessage('請修正表單中的錯誤', 'error');
                    return;
                }

                try {
                    // 顯示載入狀態
                    this.setSubmitState(submitBtn, btnText, true);
                    
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData);
                    
                    // 清理數據
                    Object.keys(data).forEach(key => {
                        data[key] = Utils.sanitizeInput(data[key]);
                    });
                    
                    // 模擬 API 呼叫
                    await this.simulateSubmission(data);
                    
                    // 成功處理
                    Utils.showMessage(
                        `感謝您的預約申請！\n\n預約資訊：\n姓名：${data.name}\n電話：${data.phone}\n人數：${data.people}\n\n我們將在24小時內與您聯繫確認詳細行程。\n\n櫻花季限量早鳥優惠至6/30！`, 
                        'success'
                    );
                    
                    form.reset();
                    this.clearAllFieldStates(form);
                    
                } catch (error) {
                    console.error('Form submission error:', error);
                    Utils.showMessage('送出失敗，請稍後再試或直接撥打電話聯繫我們。', 'error');
                } finally {
                    this.setSubmitState(submitBtn, btnText, false, originalText);
                }
            },

            setSubmitState(btn, textEl, loading, originalText = '') {
                if (loading) {
                    btn.disabled = true;
                    textEl.textContent = '送出中...';
                    btn.classList.add('loading');
                } else {
                    btn.disabled = false;
                    textEl.textContent = originalText;
                    btn.classList.remove('loading');
                }
            },

            clearAllFieldStates(form) {
                const inputs = form.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.classList.remove('error', 'success');
                    const errorEl = document.getElementById(`${input.name}-error`);
                    if (errorEl) {
                        errorEl.style.display = 'none';
                    }
                });
            },

            simulateSubmission(data) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        // 90% 成功率模擬
                        if (Math.random() > 0.1) {
                            resolve(data);
                        } else {
                            reject(new Error('Network error'));
                        }
                    }, 1500);
                });
            },

            setupDateDefault() {
                const dateInput = document.getElementById('date');
                if (dateInput) {
                    // 設定最小日期為今天
                    const today = new Date().toISOString().split('T')[0];
                    dateInput.setAttribute('min', today);
                    
                    // 預設設定為30天後
                    const futureDate = new Date();
                    futureDate.setDate(futureDate.getDate() + 30);
                    dateInput.value = futureDate.toISOString().split('T')[0];
                }
            }
        };

        // 活動卡片互動
        const ActivityHandler = {
            activities: {
                'matcha': {
                    title: '🍵 抹茶DIY體驗',
                    description: '現場報名，每場限15人\n專業老師指導，自製抹茶帶回家\n體驗日本茶道文化的精髓\n\n費用：已包含在行程中\n時間：約90分鐘'
                },
                'yukata': {
                    title: '👘 浴衣試穿體驗',
                    description: '追蹤我們的IG並拍照上傳\n提供即拍即印Polaroid\n感受日本傳統服飾之美\n\n費用：免費體驗\n時間：約60分鐘'
                },
                'gacha': {
                    title: '🎰 幸運扭蛋抽獎',
                    description: '完成所有闖關活動集滿印章\n有機會抽中免費日本來回機票\n還有更多精美日本小物等你來抽\n\n參與方式：完成指定任務\n獎品：機票、溫泉券、紀念品'
                }
            },

            show(activityId) {
                const activity = this.activities[activityId];
                if (activity) {
                    // 使用更好的彈窗體驗
                    const confirmed = confirm(`${activity.title}\n\n${activity.description}\n\n點擊確定了解更多詳情，或取消關閉。`);
                    if (confirmed) {
                        // 可以在這裡添加更多互動，如開啟詳細頁面
                        console.log(`User interested in ${activityId}`);
                    }
                }
            }
        };

        // 櫻花特效管理
        const SakuraEffect = {
            interval: null,

            init() {
                if (!CONFIG.animations.reducedMotion) {
                    this.start();
                    this.setupResponsiveInterval();
                }
            },

            start() {
                this.interval = setInterval(() => this.createParticle(), this.getInterval());
            },

            stop() {
                if (this.interval) {
                    clearInterval(this.interval);
                    this.interval = null;
                }
            },

            restart() {
                this.stop();
                this.start();
            },

            createParticle() {
                // 在小螢幕上減少櫻花數量
                if (window.innerWidth < 768 && Math.random() > 0.5) return;
                
                const sakura = document.createElement('div');
                sakura.className = 'sakura-particle';
                sakura.innerHTML = Math.random() > 0.5 ? '🌸' : '🌺';
                sakura.style.left = Math.random() * 100 + 'vw';
                document.body.appendChild(sakura);

                // 優化記憶體使用
                setTimeout(() => {
                    if (sakura.parentNode) {
                        sakura.parentNode.removeChild(sakura);
                    }
                }, 5000);
            },

            getInterval() {
                if (window.innerWidth < 768) return CONFIG.sakuraInterval.mobile;
                if (window.innerWidth < 1024) return CONFIG.sakuraInterval.tablet;
                return CONFIG.sakuraInterval.desktop;
            },

            setupResponsiveInterval() {
                window.addEventListener('resize', Utils.debounce(() => {
                    this.restart();
                }, 300));
            }
        };

        // 滾動效果管理
        const ScrollEffects = {
            init() {
                this.setupProgressBar();
                this.setupIntersectionObserver();
            },

            setupProgressBar() {
                const updateProgress = Utils.throttle(() => {
                    const scrolled = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
                    document.documentElement.style.setProperty('--scroll-progress', `${Math.min(scrolled, 100)}%`);
                }, 16); // 60fps

                window.addEventListener('scroll', updateProgress);
            },

            setupIntersectionObserver() {
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && !CONFIG.animations.reducedMotion) {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                // 觀察所有需要動畫的元素
                document.querySelectorAll('.day-card, .activity-card, .tour-package').forEach(el => {
                    if (!CONFIG.animations.reducedMotion) {
                        el.style.opacity = '0';
                        el.style.transform = 'translateY(30px)';
                        el.style.transition = 'all 0.6s ease';
                    }
                    observer.observe(el);
                });
            }
        };

        // 載入管理
        const LoadingManager = {
            init() {
                this.showLoading();
                // 模擬載入時間
                setTimeout(() => {
                    this.hideLoading();
                }, 1000);
            },

            showLoading() {
                document.getElementById('loadingSpinner').classList.add('show');
            },

            hideLoading() {
                const spinner = document.getElementById('loadingSpinner');
                spinner.classList.remove('show');
                // 載入完成後移除元素以優化效能
                setTimeout(() => {
                    if (spinner.parentNode) {
                        spinner.parentNode.removeChild(spinner);
                    }
                }, 300);
            }
        };

        // 網路狀態監控
        const NetworkMonitor = {
            init() {
                window.addEventListener('online', () => {
                    Utils.showMessage('網路連線已恢復', 'success');
                    console.log('網路連線已恢復');
                });

                window.addEventListener('offline', () => {
                    Utils.showMessage('網路連線中斷，部分功能可能受限', 'error');
                    console.log('網路連線中斷');
                });
            }
        };

        // 觸控優化
        const TouchOptimization = {
            init() {
                if ('ontouchstart' in window) {
                    this.setupTouchFeedback();
                }
            },

            setupTouchFeedback() {
                document.querySelectorAll('.activity-card, .cta-button, .submit-btn').forEach(el => {
                    el.addEventListener('touchstart', function() {
                        this.style.opacity = '0.8';
                    });
                    
                    el.addEventListener('touchend', function() {
                        this.style.opacity = '1';
                    });
                });
            }
        };

        // 全域函數 (保持向下相容)
        function toggleMenu() {
            Navigation.toggleMenu();
        }

        // 確保選單功能在頁面載入時立即可用
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeMenu);
        } else {
            initializeMenu();
        }

        function initializeMenu() {
            const menuToggle = document.querySelector('.menu-toggle');
            const nav = document.getElementById('nav');
            
            if (menuToggle && nav) {
                // 直接綁定事件作為備用方案
                menuToggle.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const isActive = nav.classList.contains('active');
                    
                    if (isActive) {
                        nav.classList.remove('active');
                        this.setAttribute('aria-expanded', 'false');
                        this.innerHTML = '☰';
                        document.body.style.overflow = '';
                    } else {
                        nav.classList.add('active');
                        this.setAttribute('aria-expanded', 'true');
                        this.innerHTML = '✕';
                        document.body.style.overflow = 'hidden';
                    }
                };
                
                console.log('選單功能已初始化');
            } else {
                console.error('選單元素未找到', { menuToggle: !!menuToggle, nav: !!nav });
            }
        }

        function showActivity(activityId) {
            ActivityHandler.show(activityId);
        }

        function handleCardKeyDown(event, activityId) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault(); 
                ActivityHandler.show(activityId);
            }
        }

        // 效能監控
        const PerformanceMonitor = {
            init() {
                if ('requestIdleCallback' in window) {
                    requestIdleCallback(() => {
                        console.log('HanaGo Travel website loaded successfully!');
                        this.logPerformanceMetrics();
                    });
                }
            },

            logPerformanceMetrics() {
                if ('performance' in window) {
                    const perfData = performance.getEntriesByType('navigation')[0];
                    console.log('Page Load Time:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');
                    console.log('DOM Content Loaded:', perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart, 'ms');
                }
            }
        };

        // 主要初始化
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // 初始化所有模組
                LoadingManager.init();
                Navigation.init();
                FormHandler.init();
                ScrollEffects.init();
                SakuraEffect.init();
                NetworkMonitor.init();
                TouchOptimization.init();
                PerformanceMonitor.init();
                
                // 價格閃爍效果
                if (!CONFIG.animations.reducedMotion) {
                    setInterval(() => {
                        const priceElement = document.querySelector('.package-price');
                        if (priceElement) {
                            priceElement.style.animation = 'none';
                            setTimeout(() => {
                                priceElement.style.animation = 'pulse 2s ease-in-out';
                            }, 10);
                        }
                    }, 8000);
                }

                console.log('🌸 HanaGo Travel 網站已成功載入！');
                
            } catch (error) {
                console.error('初始化錯誤:', error);
                Utils.showMessage('網站載入時發生錯誤，請重新整理頁面', 'error');
            }
        });

        // 頁面卸載時清理
        window.addEventListener('beforeunload', function() {
            SakuraEffect.stop();
        });

        // 錯誤處理
        window.addEventListener('error', function(event) {
            console.error('頁面錯誤:', event.error);
        });

        // Service Worker 註冊 (如果需要離線功能)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // 可以在這裡註冊 Service Worker
                console.log('Service Worker support detected');
            });
        }
    </script>
</body>
</html>